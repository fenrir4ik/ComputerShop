{% load static %}
{% load rest_framework %}


<html lang="">
<head>
    <title>Computer Shop API</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="{% static '/css/api.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static '/css/bootstrap.min.css' %}">
    <script src="{% static '/js/jquery-3.3.1.slim.min.js' %}"></script>
    <script src="{% static '/js/bootstrap.min.js' %}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <nav>
        <div class = "nav_outer">
            <div class = "nav_inner">
                <div class="container">
                    <a id = "brand_link" class='navbar-brand' rel="nofollow">
                        Computer Shop API
                    </a>
                    <ul class="nav navbar-nav pull-right nav_link">
                        {% if user.is_authenticated %}
                            <!--       -->
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    {user}<b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a href='{href}?next={next}'>Log out</a></li>
                                </ul>
                            </li>
                            <!--       -->
{#                          {% optional_logout request user %}#}
                        {% else %}
                            <li><a href='{href}?next={next}'>Log in</a></li>
{#                          {% optional_login request %}#}
                        {% endif %}
                    </ul>
{#                    {% block userlinks %}#}
{#                        {% if user.is_authenticated %}#}
{#                            <li class="dropdown">#}
{#                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">#}
{#                                    {{ user }}#}
{#                                    <b class="caret"></b>#}
{#                                </a>#}
{#                                <ul class="dropdown-menu">#}
{#                                    <li><a href="#dashboard">Dashboard</a></li>#}
{#                                    <li>{% optional_logout request user%}</li>#}
{#                                </ul>#}
{#                            </li>#}
{#                        {% else %}#}
{#                            <li>{% optional_login request %}</li>#}
{#                        {% endif %}#}
{#                    {% endblock %}#}
                </div>
            </div>
        </div>
    </nav>
    <div class="container main_content">
        <div class="container api_back">
            <a class="api_link" href="{{ api_root }}">Api Repository</a>
        </div>
        <div class="panel-heading">
            <h1 id="api_title">List of available API methods</h1>
        </div>
        <div class="container panel-body api_back api_table">
            <div class="table-responsive">
                <table class="table table-condensed ">
                    <thead>
                    <tr>
                        <th></th>
                        <th scope="col"><p class="thead_label">Package</p></th>
                        <th scope="col"><p class="thead_label">Name</p></th>
                        <th scope="col"><p class="thead_label">Url</p></th>
                        <th scope="col"><p class="thead_label">HTTP Method</p></th>
                        <th scope="col"><p class="thead_label" style="text-align: center;">Working</p></th>
                    </tr>
                    </thead>
                    <tbody>
                        {% for endpoint in endpoints %}
                            <tr data-toggle="collapse" data-target="#dtarget{{ endpoint.index }}" class="accordion-toggle">
                                <td style="text-align: center">
                                    <i class="fa fa-eye"></i>
                                </td>
                                <td><p class="api_name">{{ endpoint.package_name }}</p></td>
                                <td><p class="api_name">{{ endpoint.endpoint_name }}</p></td>
                                <td><a class="api_link" href="{{ endpoint.endpoint_url }}">{{ endpoint.endpoint_url }}</a></td>
                                <td>
                                    {% if endpoint.method_name.upper == 'GET' %}
                                        <p style="color: #68b641;">{{ endpoint.method_name.upper }}</p>
                                    {% elif endpoint.method_name.upper == 'POST' %}
                                        <p style="color: #337ab7;">{{ endpoint.method_name.upper }}</p>
                                    {% elif endpoint.method_name.upper == 'PUT' %}
                                        <p style="color: #F1C40F;">{{ endpoint.method_name.upper }}</p>
                                    {% elif endpoint.method_name.upper == 'PATCH' %}
                                        <p style="color: #E67E22;">{{ endpoint.method_name.upper }}</p>
                                    {% elif endpoint.method_name.upper == 'DELETE' %}
                                        <p style="color: #d9534f;">{{ endpoint.method_name.upper }}</p>
                                    {% else %}
                                        <p style="color: grey;">{{ endpoint.method_name.upper }}</p>
                                    {% endif %}
                                </td>
                                {% if endpoint.available %}
                                    <td style="text-align: center; color: green;"><i class="fa fa-circle" aria-hidden="true"></i></td>
                                {% else %}
                                    <td style="text-align: center; color: red;"><i class="fa fa-circle" aria-hidden="true"></i></td>
                                {% endif %}
    {#                                    <td><p class="api_name">{{ endpoint.available }}</p></td>#}
                            </tr>
                            <tr>
                                <td colspan="6" class="hiddenRow">
                                    <div id="dtarget{{ endpoint.index }}" class="accordian-body collapse">
                                        <p class="api_name">{{ endpoint.in_params }}</p>
                                        <p class="api_name">{{ endpoint.out_params }}</p>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
</html>

