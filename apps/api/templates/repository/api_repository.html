{% load static %}
{% load rest_framework %}
{% load extras %}


<html lang="ru">
<head>
    <title>Computer Shop API</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="{% static '/css/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static '/css/bootstrap-theme.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static '/css/bootstrap-tweaks.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static '/css/api.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static '/css/all.css' %}">
</head>
<body>
<div class="navbar navbar-static-top {% block bootstrap_navbar_variant %}navbar-inverse{% endblock %}"
    role="navigation">
    <div class="container">
        <span>
            {% block branding %}
                <a class='navbar-brand' style="color: #9d9d9d;" rel="nofollow">
                    Computer Shop API
                </a>
            {% endblock %}
        </span>
        <ul class="nav navbar-nav pull-right">
            {% block userlinks %}
                {% if user.is_authenticated %}
                    {% optional_logout request user %}
                {% else %}
                    {% optional_login request %}
                {% endif %}
            {% endblock %}
        </ul>
    </div>
</div>
<div class="container main_content">
    <div class="container api_back">
        <a class="api_link" href="{{ api_root }}">Api Repository</a>
    </div>
    <div class="panel-heading">
        <h1 id="api_title">List of available API methods</h1>
    </div>
    <div class="container panel-body api_back api_table">
        <div class="table-responsive">
            <table class="table table-condensed ">
                <thead>
                <tr>
                    <th></th>
                    <th scope="col"><p class="thead_label">Package</p></th>
                    <th scope="col"><p class="thead_label">Name</p></th>
                    <th scope="col"><p class="thead_label">Url</p></th>
                    <th scope="col"><p class="thead_label">HTTP Method</p></th>
                    <th scope="col"><p class="thead_label" style="text-align: center;">Working</p></th>
                </tr>
                </thead>
                <tbody>
                {% for endpoint in endpoints %}
                    <tr data-toggle="collapse" data-target="#dtarget{{ endpoint.index }}" class="accordion-toggle">
                        <td style="text-align: center">
                            <i class="fa fa-eye"></i>
                        </td>
                        <td><p class="api_name">{{ endpoint.package_name }}</p></td>
                        <td><p class="api_name">{{ endpoint.endpoint_name }}</p></td>
                        {% if endpoint.available %}
                            <td><a class="api_link" href="{{ endpoint.endpoint_url }}">{{ endpoint.endpoint_url }}</a></td>
                        {% else %}
                            <td><a class="api_link" style="color: #A30000;">{{ endpoint.endpoint_url }}</a></td>
                        {% endif %}
                        <td class = "http_method">
                            {% if endpoint.method_name.upper == 'GET' %}
                                <p style="color: #68b641;">{{ endpoint.method_name.upper }}</p>
                            {% elif endpoint.method_name.upper == 'POST' %}
                                <p style="color: #337ab7;">{{ endpoint.method_name.upper }}</p>
                            {% elif endpoint.method_name.upper == 'PUT' %}
                                <p style="color: #F1C40F;">{{ endpoint.method_name.upper }}</p>
                            {% elif endpoint.method_name.upper == 'PATCH' %}
                                <p style="color: #E67E22;">{{ endpoint.method_name.upper }}</p>
                            {% elif endpoint.method_name.upper == 'DELETE' %}
                                <p style="color: #d9534f;">{{ endpoint.method_name.upper }}</p>
                            {% else %}
                                <p style="color: grey;">{{ endpoint.method_name.upper }}</p>
                            {% endif %}
                        </td>
                        {% if endpoint.available %}
                            <td style="text-align: center; color: green;"><i class="fa fa-circle" aria-hidden="true"></i></td>
                        {% else %}
                            <td style="text-align: center; color: red;"><i class="fa fa-circle" aria-hidden="true"></i>
                            </td>
                        {% endif %}
                    </tr>
                    <tr>
                        <td colspan="6" class="hiddenRow" >
                            <div id="dtarget{{ endpoint.index }}" class="accordian-body collapse">
                                <div class = "params">
                                    <h6 class="params_title">Parameters</h6>
                                    <pre>{{ endpoint.in_params | pretty_json  }}</pre>
                                    <h6 class="params_title">Response</h6>
                                    <pre>{{ endpoint.out_params  | pretty_json  }}</pre>
                                </div>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
<script src="{% static '/js/jquery-3.3.1.slim.min.js' %}"></script>
<script src="{% static '/js/bootstrap.min.js' %}"></script>
</html>

